{"ast":null,"code":"import Router from 'next/router';\nimport actions from '../redux/actions';\nimport { getCookie } from '../utils/cookie'; //ambil token dari cookie\n\nexport default function (ctx) {\n  if (ctx.isServer) {\n    if (ctx.req.headers.cookie) {\n      ctx.store.dispatch(actions.reauthenticate(getCookie('token', ctx.req)));\n    }\n  } else {\n    const token = ctx.store.authentication.token;\n\n    if (token && (ctx.pathname === '/loginpage' || ctx.pathname === '/registerpage')) {\n      setTimeout(function () {\n        Router.push('/');\n      }, 0);\n    }\n  }\n}","map":{"version":3,"sources":["D:/Koomik/fe_pokekoo/utils/initialize.jsx"],"names":["Router","actions","getCookie","ctx","isServer","req","headers","cookie","store","dispatch","reauthenticate","token","authentication","pathname","setTimeout","push"],"mappings":"AAAA,OAAOA,MAAP,MAAmB,aAAnB;AACA,OAAOC,OAAP,MAAoB,kBAApB;AACA,SAASC,SAAT,QAA0B,iBAA1B,C,CAEA;;AACA,eAAe,UAASC,GAAT,EAAc;AAE3B,MAAGA,GAAG,CAACC,QAAP,EAAiB;AACf,QAAGD,GAAG,CAACE,GAAJ,CAAQC,OAAR,CAAgBC,MAAnB,EAA2B;AACzBJ,MAAAA,GAAG,CAACK,KAAJ,CAAUC,QAAV,CAAmBR,OAAO,CAACS,cAAR,CAAuBR,SAAS,CAAC,OAAD,EAAUC,GAAG,CAACE,GAAd,CAAhC,CAAnB;AACD;AACF,GAJD,MAIO;AACL,UAAMM,KAAK,GAAGR,GAAG,CAACK,KAAJ,CAAUI,cAAV,CAAyBD,KAAvC;;AAEA,QAAGA,KAAK,KAAKR,GAAG,CAACU,QAAJ,KAAiB,YAAjB,IAAiCV,GAAG,CAACU,QAAJ,KAAiB,eAAvD,CAAR,EAAiF;AAC/EC,MAAAA,UAAU,CAAC,YAAW;AACpBd,QAAAA,MAAM,CAACe,IAAP,CAAY,GAAZ;AACD,OAFS,EAEP,CAFO,CAAV;AAGD;AACF;AAGF","sourcesContent":["import Router from 'next/router';\r\nimport actions from '../redux/actions';\r\nimport { getCookie } from '../utils/cookie';\r\n\r\n//ambil token dari cookie\r\nexport default function(ctx) {\r\n\r\n  if(ctx.isServer) {\r\n    if(ctx.req.headers.cookie) {\r\n      ctx.store.dispatch(actions.reauthenticate(getCookie('token', ctx.req)));\r\n    }\r\n  } else {\r\n    const token = ctx.store.authentication.token;\r\n\r\n    if(token && (ctx.pathname === '/loginpage' || ctx.pathname === '/registerpage')) {\r\n      setTimeout(function() {\r\n        Router.push('/');\r\n      }, 0);\r\n    }\r\n  }\r\n\r\n\r\n}"]},"metadata":{},"sourceType":"module"}